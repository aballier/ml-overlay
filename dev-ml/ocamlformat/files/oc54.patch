From 806d08323d239373c6ee6e974e1e39726f927e6c Mon Sep 17 00:00:00 2001
From: Jules Aguillon <jules@j3s.fr>
Date: Thu, 12 Jun 2025 16:36:21 +0200
Subject: [PATCH] Build with OCaml 5.4 (#2717)

This doesn't make OCamlformat able to format 5.4 code.
---
 CHANGES.md               | 4 ++++
 lib/bin_conf/Bin_conf.ml | 8 +++-----
 2 files changed, 7 insertions(+), 5 deletions(-)

diff --git a/lib/bin_conf/Bin_conf.ml b/lib/bin_conf/Bin_conf.ml
index 966ee72b8e..4365bff4a9 100644
--- a/lib/bin_conf/Bin_conf.ml
+++ b/lib/bin_conf/Bin_conf.ml
@@ -523,11 +523,9 @@ let update_using_env conf =
 let discard_formatter =
   Format.(
     formatter_of_out_functions
-      { out_string= (fun _ _ _ -> ())
-      ; out_flush= (fun () -> ())
-      ; out_newline= (fun () -> ())
-      ; out_spaces= (fun _ -> ())
-      ; out_indent= (fun _ -> ()) } )
+      { (get_formatter_out_functions ()) with
+        out_string= (fun _ _ _ -> ())
+      ; out_flush= (fun () -> ()) } )
 
 let global_lib_term =
   Term.(
